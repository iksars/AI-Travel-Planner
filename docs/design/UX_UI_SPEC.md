### AI 旅行规划师 - 前端UX/UI规格说明书

**1. UX 目标与设计原则**

*   **核心UX目标:**
    *   **效率至上:** 将用户从繁琐的规划中解放出来，实现从模糊想法到结构化行程的秒级转化。
    *   **智能个性化:** 让用户感觉系统是“懂我的”专属旅行顾问，而非冰冷的工具。
    *   **直观可控:** 以地图为核心，提供沉浸式、可视化的行程概览，同时确保用户对AI生成的计划拥有最终的编辑和调整权。
*   **设计原则:**
    *   **对话式优先 (Conversational First):** 界面设计应围绕“输入 -> 反馈”的对话模式展开，引导用户自然地表达需求。
    *   **视觉引导决策 (Visuals Drive Decisions):** 用高质量的图片和清晰的地图可视化，代替冗长的文字，帮助用户快速决策。
    *   **无缝体验 (Seamless Experience):** 确保在不同设备（桌面、移动端）和不同场景（规划、途中）下，体验都是连贯且一致的。
    *   **提供安全感 (Provide Assurance):** 在等待、出错或空状态时，给予用户清晰、友好的反馈，建立信任感。

**2. 核心用户流程 (Key User Flows)**

*   **流程 1: 创建家庭旅行计划 (主要流程)**
    1.  **启动:** 用户打开应用，进入主页。
    2.  **输入:** 点击语音按钮，说出需求：“我们一家三口想去日本，5天，预算1万块，孩子喜欢动漫和主题公园...”。
    3.  **处理:** 系统显示“正在为您规划完美旅程...”的加载动画和提示语。
    4.  **呈现:** 15秒内，界面切换到“行程详情页”。左侧是每日行程卡片列表，右侧是显示完整路线和兴趣点的交互式地图。页面顶部展示预算分析概览。
    5.  **交互:** 用户点击地图上的景点图标，查看详情；或在左侧微调某天的餐厅。
    6.  **保存:** 用户点击“保存计划”，系统提示登录/注册。完成后，计划被保存至“我的旅行”。

*   **流程 2: 途中快速记账**
    1.  **访问:** 用户在旅行途中打开已保存的计划。
    2.  **触发:** 点击页面上的“记一笔”悬浮按钮 (Floating Action Button)。
    3.  **输入:** 弹出记账模态框，用户通过语音说“打车花了35块”，系统自动识别并填入金额与类别。
    4.  **确认:** 用户点击“保存”，模态框关闭。
    5.  **反馈:** “预算分析”模块的已花费金额实时更新，并伴有轻微的数字滚动动画。

**3. 页面规格与交互详情 (Screen-by-Screen Specification)**

**3.1 页面/模块：主页 (Home Screen)**

*   **页面目标:** 快速捕获用户旅行意图，启动规划流程。
*   **布局与组件:**
    *   **宏观布局:** 居中焦点式布局。
    *   **组件:**
        *   应用Logo
        *   引人注目的Slogan (例如：“说出你的想法，世界就在脚下”)
        *   **核心输入区 (Input Area):** 一个包含文本输入框和语音输入按钮的复合组件。
        *   **偏好标签 (Preference Tags):** (可选) 提供一些常用标签如“亲子”、“徒步”、“美食”供用户快速点选。
        *   指向“我的旅行”的导航链接 (右上角，仅在登录后显示)。
*   **交互与状态 (HCI):**
    *   **语音输入按钮:**
        *   **默认:** 麦克风图标。
        *   **悬停:** 图标放大或背景出现光晕。
        *   **点击/聆听中:** 按钮周围出现脉冲或声波动画，提示用户“正在聆听...”。
        *   **识别完成:** 语音转化的文字填入输入框。
    *   **文本输入框:**
        *   **获焦 (Focused):** 边框变主题色（如蓝色），并显示光标。
        *   **输入引导:** 框内可有占位符提示，如：“试试说：去云南玩一个星期，预算5000”。
    *   **“开始规划”按钮:**
        *   **默认:** 亮色主题色填充。
        *   **禁用 (Disabled):** 当输入框为空时，按钮为灰色，不可点击。
        *   **加载中 (Loading):** 点击后，按钮上显示加载指示器 (Spinner)，文字变为“规划中...”。

**3.2 页面/模块：行程详情页 (Trip Plan Display)**

*   **页面目标:** 直观展示AI生成的完整行程，提供预算分析，并允许用户进行微调。
*   **布局与组件:**
    *   **宏观布局:** 桌面端为左右两栏布局；移动端为上下结构。
        *   **左栏/上部:** 可滚动的每日行程卡片列表。
        *   **右栏/下部:** 占据主要视觉区域的交互式地图。
    *   **组件:**
        *   **行程标题:** (例如：“王女士的日本亲子动漫之旅”)
        *   **预算分析模块 (Budget Widget):**
            *   总预算 vs 预估/已花费的甜甜圈图。
            *   机票、酒店、餐饮等分类支出。
        *   **每日行程卡片 (Daily Itinerary Card):**
            *   日期和星期 (例如：“Day 1: 1月25日, 周六”)。
            *   包含多个“项目卡片”(景点、餐厅等)，每个卡片含图片、名称、建议时间和交通方式图标。
        *   **交互式地图 (Map View):**
            *   显示每日路线 (用不同颜色区分)。
            *   显示所有项目的标记点 (Markers)。
        *   **“记一笔”悬浮按钮 (FAB):** 用于触发记账功能。
        *   **“保存/分享”按钮组。**
*   **交互与状态 (HCI):**
    *   **数据加载:** 页面初次加载时，左栏显示“骨架屏” (Skeleton Screen)，地图区域显示加载动画。
    *   **列表与地图联动:**
        *   滚动左侧行程列表至某一天时，地图自动聚焦并高亮当天的路线和标记点。
        *   点击地图上的某个标记点，左侧列表自动滚动到对应的项目卡片，并高亮显示。
    *   **行程可编辑性:**
        *   每个项目卡片在悬停时显示“替换”和“删除”图标。
        *   点击“替换”，弹窗推荐相似的备选景点/餐厅。
    *   **空状态:** 若AI因输入信息不足无法生成计划，此页面应显示空状态，包含友好插图和引导文案：“信息太少啦，试试告诉我您想去哪，玩几天？”并提供返回主页的按钮。

**3.3 页面/模块：用户认证页 (Login / Register)**

*   **页面目标:** 允许用户安全地登录或注册，以保存个人数据。
*   **布局与组件:**
    *   标准居中表单布局。
    *   Logo, 页面标题 (“登录”/“注册”)。
    *   输入框 (邮箱/手机号, 密码, 验证码)。
    *   “登录”/“注册”主按钮。
    *   第三方登录选项 (微信, Google图标按钮)。
    *   “忘记密码”链接, “切换到注册/登录”链接。
*   **交互与状态 (HCI):**
    *   **输入框:**
        *   **校验错误 (Error):** 格式不正确或必填项为空时，边框变红，下方显示具体错误信息，如“请输入有效的邮箱地址”。
    *   **“登录”按钮:**
        *   **加载中:** 点击后显示加载指示器，防止重复提交。
    *   **系统反馈:**
        *   登录失败时，在表单顶部显示红色的错误提示条：“用户名或密码错误，请重试”。
        *   注册成功后，自动登录并跳转至之前的页面或主页，并显示全局成功提示：“欢迎！您的账户已创建成功”。

**4. 全局交互模式 (Global Interaction Patterns)**

*   **4.1 导航:**
    *   **桌面端:** 采用顶部固定导航栏，包含Logo、核心功能链接（我的旅行）、用户头像/登录入口。
    *   **移动端:** 顶部导航栏简化，次要功能收起到由“汉堡菜单”触发的侧滑抽屉中。
*   **4.2 错误处理:**
    *   **字段级验证:** 表单内实时验证，错误信息在输入框下方即时显示。
    *   **API/服务器错误:** 所有非用户输入造成的失败（如网络问题、第三方服务失败），均通过页面顶部的全局提示条 (Toast/Snackbar) 进行非侵入式提示，内容友好（如：“网络开小差了，请稍后重试”）。
*   **4.3 确认机制:**
    *   所有危险的“删除”操作（如删除一个旅行计划、删除一个记账记录）必须弹出模态框（Modal）进行二次确认，明确告知用户操作的后果。

**5. 可访问性 (A11y) 检查清单**

*   所有表单控件 (`<input>`, `<select>`) 必须与一个明确的 `<label>` 关联。
*   所有只包含图标的按钮（如语音按钮）必须提供 `aria-label` 属性来描述其功能 (例如: `aria-label="开始语音输入"`)。
*   确保键盘用户可以使用 `Tab` 键在所有可交互元素（链接、按钮、输入框）之间按逻辑顺序导航。
*   模态框打开时，焦点 (`focus`) 必须自动移入模态框内部；关闭时，焦点必须返回到触发它的那个元素上。
*   确保前景色和背景色有足够的对比度，满足WCAG AA标准。

**6. 待确认的设计问题 (Questions for PM/Client)**

1.  **品牌与视觉:** 是否有现成的设计系统 (Design System) 或品牌VI指南需要遵循？这将直接影响颜色、字体、图标风格和组件圆角的规范。
2.  **地图供应商:** 地图服务最终选用哪家供应商（高德、百度、Google Maps）？其API提供的地图样式和标记点自定义能力会影响UI设计。
3.  **动效等级:** 我们期望应用的动效是“功能性的、克制的”还是“丰富有趣的、品牌化的”？这将决定微交互和页面过渡的设计复杂度和实现成本。
